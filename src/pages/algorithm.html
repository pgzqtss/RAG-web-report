<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Algorithm - RAG-n-Bones</title>

  <!-- Favicons -->
  <link href="../../assets/img/favicon.png" rel="icon" />
  <link href="../../assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Nunito:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="../../assets/vendor/aos/aos.css" rel="stylesheet" />
  <link href="../../assets/css/main.css" rel="stylesheet" />

  <style>
    body {
      padding-top: 90px;
    }
    .section-nav {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
      border-radius: 0.75rem;
      background: #fff;
      padding: 1.5rem;
      border: 1px solid #f1f1f1;
    }
    .section-nav h5 {
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    .section-nav .sub-item {
      border-left: 2px solid #e5e7eb;
      padding-left: 1rem;
      margin-left: 0.5rem;
    }

    .algorithm-hero {
      background: linear-gradient(90deg, #4ca1af, #c4e0e5);
      padding: 60px 0;
      text-align: center;
      color: #fff;
    }

    .algorithm-hero h1 {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .algorithm-section {
      padding: 60px 0;
    }

    .algorithm-section h2 {
      color: #3399ff;
      font-weight: 700;
      font-size: 32px;
      margin-top: 40px;
      margin-bottom: 20px;
    }

    .algorithm-section p {
      margin-bottom: 15px;
      line-height: 1.8;
    }
    .clickable-file {
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .clickable-file:hover {
      background-color: #f8f9fa;
    }
    
    .sidebar-nav {
      position: sticky;
      top: 100px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
    }

    .sidebar-nav h5 {
      font-weight: bold;
    }

    .sidebar-nav ul {
      list-style: none;
      padding-left: 0;
    }

    .sidebar-nav li {
      margin-bottom: 8px;
    }

    .sidebar-nav a {
      text-decoration: none;
      color: #3399ff;
    }

    /* File Cards */
  .file-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
  }
  
  .file-card {
    background: #ffffff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border-top: 3px solid #6f2fb8;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .file-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.12);
  }
  
  .file-title {
    font-size: 1.1rem;
    color: #6f2fb8;
    margin-bottom: 0.5rem;
  }
  
  .file-description {
    color: #666;
    margin-bottom: 1rem;
    font-style: italic;
  }
  
  .steps-list {
    padding-left: 1.2rem;
    margin: 1rem 0;
  }
  
  .steps-list li {
    margin-bottom: 0.5rem;
    color: #555;
  }
  
  /* Output Cards */
  .output-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin: 1.5rem 0;
  }
  
  .output-card {
    background: #ffffff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border: 1px solid #eee;
    transition: all 0.3s ease;
    cursor: pointer;
  }
  
  .output-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.12);
    border-color: #6f2fb8;
  }
  
  .output-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }
  
  .file-indicator {
    font-size: 0.8rem;
    color: #f7672f;
    font-weight: 500;
  }
  
  .output-preview {
    display: flex;
    align-items: center;
    color: #666;
  }
  
  .output-preview i {
    margin-right: 0.5rem;
    font-size: 1.2rem;
  }
  
  /* Text Styles */
  .intro-text, .process-description, .comparison-description, .results-text, .additional-info {
    line-height: 1.7;
    color: #555;
    margin-bottom: 1.2rem;
  }

    .breadcrumbs {
      font-size: 0.95rem;
      color: rgba(255,255,255,0.8);
    }
    
    .breadcrumbs a {
      color: white;
      text-decoration: none;
      transition: opacity 0.3s;
    }
    
    .breadcrumbs a:hover {
      opacity: 0.8;
    }
    
    .breadcrumbs .current {
      color: rgba(255,255,255,0.6);
    }

    .content-card {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      margin: 2.5rem 0;
      box-shadow: var(--card-shadow);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .content-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-hover-shadow);
    }

    h2 {
      position: relative;
      padding-left: 1.2rem;
      margin-bottom: 1.5rem;
      color: var(--primary-color);
    }

    h2::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.25em;
      height: 1.4em;
      width: 5px;
      background: var(--primary-color);
      border-radius: 3px;
    }
    
    .code-block {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 1.5rem;
      border-radius: 0.5rem;
      font-family: 'Roboto Mono', monospace;
      overflow-x: auto;
      margin: 1.5rem 0;
      font-size: 0.9rem;
      line-height: 1.5;
      border-left: 4px solid var(--secondary-color);
    }

    .code-block pre {
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
      tab-size: 2;
    }
    
    ul, ol {
      padding-left: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    li {
      margin-bottom: 0.6rem;
    }
    
    .section-nav {
      position: sticky;
      top: 120px;
      max-height: calc(100vh - 140px);
      overflow-y: auto;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      background: white;
      padding: 1rem;
      border-radius: 0.5rem;
      transition: transform 0.3s ease;
    }

    body.scrolled-to-bottom .section-nav {
      position: absolute;
      bottom: 0;
      top: auto;
      transform: translateY(-20px);
    }

    .section-nav ul {
      list-style: none;
      padding-left: 0;
    }
    
    .section-nav li {
      margin-bottom: 0.5rem;
    }
    
    .section-nav a {
      color: #4b5563;
      text-decoration: none;
      transition: color 0.2s;
      font-size: 0.95rem;
    }
    
    .section-nav a:hover {
      color: var(--primary-color);
    }
    
    /* 依赖标签 */
    .dependencies {
      background: #f3f4f6;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      display: inline-block;
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
      color: #4b5563;
    }
    
    
  </style>
</head>
<body>
  <!-- Header -->
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
      <a href="../../index.html" class="logo d-flex align-items-center">
        <img src="../../assets/img/logo.png" alt="" />
        <span class="sitename">Rag-n-Bones</span>
      </a>
      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="../../index.html">Home</a></li>
          <li><a href="requirements.html">Requirements</a></li>
          <li><a href="research.html">Research</a></li>

          <li><a href="algorithm.html" class="active">Algorithm</a></li>
          <li><a href="ui-design.html">UI Design</a></li>

          <li><a href="system-design.html">System Design</a></li>
          <li><a href="implements.html">Implementation</a></li>
          <li><a href="testing.html">Testing</a></li>
          <li><a href="evaluation.html">Evaluation</a></li>

          <li><a href="appendix.html">Appendices</a></li>

        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="algorithm-hero">
    <div class="container" data-aos="fade-up">
      <h1>Algorithm</h1>
      <p class="lead">An overview of our core algorithmic processes and data flows</p>
    </div>
  </section>

  <section class="algorithm-section">
    <div class="container">
      <div class="row">
        <!-- Main Content -->
        <div class="col-lg-8">
        <div class="content-card implementation-section"id="algorithm">
          <h2 class="section-title"id="Implementation">Implementation</h2>
          
          <div class="experiment-intro">
            <h3 class="subsection-title">Experiment on Fine-tuning</h3>
            <p class="intro-text">
              We were thinking of improving accuracy and relevancy, so we planned to fine-tune a language model to achieve better performance. 
              Theoretically, a fine-tuned model 
              However, due to various reasons such as GPU limitation, cost limitation, time limitation, we stopped implementing. 
              The fine-tuning code is available in our GitHub, called model_agent in backend. Here is the process of how we did it.
            </p>
          </div>
        
          <div class="process-section">
            <h4 class="process-title">Fine-tuning Process</h4>
            <p class="process-description">
              There are three files involved in the fine-tuning process:
            </p>
            
            <div class="file-cards">
              <!-- Upload PDFs Card -->
              <div class="file-card">
                <h5 class="file-title">upload_pdfs.py</h5>
                <p class="file-description">Responsible for loading PDF files, cleaning the text, splitting the data</p>
                <div class="file-details">
                  <p>This script performs the following steps:</p>
                  <ul class="steps-list">
                    <li>Loads PDF files</li>
                    <li>Cleans the text</li>
                    <li>Splits the data (similar to the regular pipeline)</li>
                    <li>Prepares training and testing datasets</li>
                    <li>Saves data into CSV files</li>
                  </ul>
                  <p class="additional-info">
                    We prepare the dataset by pairing X as input medical papers and Y as output systematic reviews into a Pandas data frame. 
                    We created the dataset manually by looking up systematic reviews (Y) online and getting their reference papers (X). 
                    Then, we split the data into training and testing datasets with 80% for training and 20% for testing. 
                    After all these, we save them into training_data.csv and testing_data.csv.
                  </p>
                </div>
              </div>

              <!-- Fine Tune Model Card -->
            <div class="file-card">
              <h5 class="file-title">fine_tune_model.py</h5>
              <p class="file-description">Handles the fine-tuning process of the pre-trained model</p>
              <div class="file-details">
                <p>This script explains the process of fine-tuning a pre-trained T5-small model (from Hugging Face) on the prepared dataset:</p>
                <ul class="steps-list">
                  <li>Loads the training_data.csv</li>
                  <li>Extracts X and Y</li>
                  <li>Creates a custom TensorFlow dataset class to tokenize the input X and target Y texts</li>
                  <li>Initializes the model</li>
                  <li>Compiles it with optimizer and computes the loss function</li>
                  <li>Trains the model on the dataset in batches of 8 for 3 epochs</li>
                  <li>Evaluates the model on the same dataset (we did not have time to create a validation dataset)</li>
                  <li>Saves the fine-tuned model and tokenizer to the fine-tuned-model directory</li>
                </ul>
              </div>
            </div>
            
            <!-- Try Model Card -->
            <div class="file-card">
              <h5 class="file-title">try_model.py</h5>
              <p class="file-description">Used for testing the fine-tuned model</p>
              <div class="file-details">
                <p>This script tests the fine-tuned model:</p>
                <ul class="steps-list">
                  <li>Loads the model from fine-tuned-model directory</li>
                  <li>Loads the testing_data.csv file with X_test and Y_test extracted</li>
                  <li>Creates a custom TensorFlow dataset class to tokenize X_test and Y_test texts</li>
                  <li>Compiles, computes loss, and evaluates</li>
                  <li>Prints the test loss</li>
                  <li>Generates predictions for the testing dataset and prints them in terminal</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      
        <div class="results-section"id ="results">
          <h4 class="results-title">Results and Comparison</h4>
          <div class="results-content">
            <p class="results-text">
              Unfortunately, the result output was some sentences that aren't even grammatically correct, 
              many sentence were meaningless and lack coherence. As the model failed to produce a usable 
              output, we did not conduct any measurement evaluations like cosine similarity or BLEU scores.
            </p>
            <p class="results-text">
              Overall, it is an interesting experience, especially the fine-tuning process for transformer models. 
              Also, we understand that there is a lot of challenges beside writing the code itself, such as data quality, 
              pre-trained model itself, etc. If we are given more time and resources, we could try this on a larger 
              dataset and better language model, potentially achieving higher quality results.
            </p>
          </div>
          
          <div class="comparison-section"id="comparison">
            <h5 class="comparison-title">Comparison Between Outputs</h5>
            <p class="comparison-description">
              Here's the comparison between output from our fine-tuned model, and our current application output:
            </p>
            <div class="code-block clickable-file" data-filepath="../../assets/content/fine-tuning-output.txt">
              <strong>Fine-tuned Model Output:</strong><br>
              <span class="file-content">Click to view fine-tuning output file</span>
            </div>
            
            <div class="code-block clickable-file" data-filepath="../../assets/content/RAG-app-generate-review.txt">
              <strong>Current Application Output:</strong><br>
              <span class="file-content">Click to view current application output file</span>
            </div>  
          </div>
        </div>
      </div>
  
      <h3 class="subsection-title mt-5"id="Crawling">Experiment of Crawling Similar Articles</h3>

      <div class="content-card" data-aos="fade-up">
        <h5>System Description</h5>
        <p class="intro-text">
          This subsystem enhances content quality by systematically acquiring and refining literature in three main stages:
        </p>
      
        <div class="output-cards">
          <div class="output-card">
            <div class="output-header">
              <strong>1. Keyword Extraction</strong>
              <span class="file-indicator">Automated</span>
            </div>
            <p class="output-preview">
              <i class="bi bi-search"></i> Extracts domain-relevant terms (e.g., "Covid-19") from segmented PDF sections to guide focused literature retrieval.
            </p>
          </div>
      
          <div class="output-card">
            <div class="output-header">
              <strong>2. Literature Collection</strong>
              <span class="file-indicator">Multi-source</span>
            </div>
            <p class="output-preview">
              <i class="bi bi-journal-text"></i> Searches PubMed → PMC/DOI, retrieves full texts or abstracts via PMC/Sci-Hub.
            </p>
            <ul class="steps-list">
              <li>4 full texts from PMC</li>
              <li>3 PDFs via Sci-Hub</li>
              <li>2 abstracts used</li>
              <li>1 unavailable</li>
            </ul>
          </div>
      
          <div class="output-card">
            <div class="output-header">
              <strong>3. Content Standardization</strong>
              <span class="file-indicator">Preprocessing</span>
            </div>
            <p class="output-preview">
              <i class="bi bi-wrench-adjustable-circle"></i> Cleans and normalizes collected data:
            </p>
            <ul class="steps-list">
              <li>Fixes hyphenation (e.g., "reha-<br />bilitation")</li>
              <li>Removes non-essential symbols (†, ‡, etc.)</li>
              <li>Deletes reference sections</li>
              <li>Normalizes whitespace</li>
            </ul>
          </div>
        </div>
      
        <h5 class="mt-4">Future Enhancements</h5>
        <ul>
          <li><strong>Expanded Sources:</strong> Integrate Crossref, Google Scholar, preprint servers</li>
          <li><strong>Structured Extraction:</strong> Preserve tables, figures, and equations</li>
          <li><strong>Literature Prioritization:</strong> Add filters for recency and journal credibility</li>
          <li><strong>Cross-domain Linking:</strong> Use keyword maps for inter-discipline relevance</li>
        </ul>
      
        <p class="additional-info">
          This system is key to building a reliable, academically-grounded database that supports accurate and responsible content generation. Future iterations will aim to deepen literature coverage and context relevance for systematic review tasks.
        </p>
      </div>
    </div> 
        
  
    <div class="col-lg-4 d-none d-lg-block">
      <div class="section-nav">
        <h5>Page Sections</h5>
        <ul class="list-unstyled">
          <li><a href="#implementation">Implementation</a></li>
          <li><a href="#results">Results & Comparison</a></li>
          <li><a href="#crawling">Crawling Articles</a></li>
        </ul>
      </div>
    </div>
    </div>
  </div> 
  </section>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer text-white position-relative" style="background: linear-gradient(to right, #4b6cb7, #182848);">

    <!-- 波浪形 SVG -->
    <div class="wave-shape" style="position: absolute; top: -100px; left: 0; width: 100%; overflow: hidden; line-height: 0; transform: rotate(180deg);">
      <svg viewBox="0 0 500 150" preserveAspectRatio="none" style="position: relative; display: block; width: calc(100% + 1.3px); height: 100px;">
        <path d="M-2.19,29.63 C149.99,150.00 321.41,-49.99 502.54,44.96 L500.00,0.00 L0.00,0.00 Z"
              style="stroke: none; fill: #ffffff;"></path>
      </svg>
    </div>
  
    <div class="container pt-5" style="position: relative; z-index: 1;">
      <div class="row gy-4">
        <!-- 左侧：Site Info -->
        <div class="col-lg-4 col-md-6">
          <h3 class="fw-bold">Site Info</h3>
          <p>
            This is the website for UCL Year 2 COMP0016 Team 29 RAG-n-Bones, introducing the team project and containing all portfolios.
          </p>
        </div>
        <!-- 中间：Site Menu -->
        <div class="col-lg-4 col-md-6">
          <h3 class="fw-bold">Site Menu</h3>
          <ul class="list-unstyled">
            <li><a href="../../index.html" class="text-white text-decoration-none">Home</a></li>
            <li><a href="requirements.html" class="text-white text-decoration-none">Requirements</a></li>
            <li><a href="research.html" class="text-white text-decoration-none">Research</a></li>
            <li><a href="algorithm.html" class="text-white text-decoration-none">Algorithm</a></li>
            <li><a href="system-design.html" class="text-white text-decoration-none">System Design</a></li>
            <li><a href="implements.html" class="text-white text-decoration-none">Implementation</a></li>
            <li><a href="testing.html" class="text-white text-decoration-none">Testing</a></li>
            <li><a href="evaluation.html" class="text-white text-decoration-none">Evaluation</a></li>
            <li><a href="appendix.html" class="text-white text-decoration-none">Appendices</a></li>
          </ul>
        </div>
        <!-- 右侧：Project Supporters -->
        <div class="col-lg-4 col-md-12">
          <h3 class="fw-bold">Project Supporters</h3>
          <p class="mb-1">Joseph Connor, CarefulAI</p>
          <p class="mb-3">UCL</p>
          <p class="mb-0">
            A lot of thanks to our company partner Joseph Connor, CarefulAI.
          </p>
        </div>
      </div>
  
      <!-- 底部版权信息 -->
      <hr class="my-4">
      <div class="text-center pb-3">
        <p class="mb-0">© 2025 All Rights Reserved</p>
      </div>
    </div>
  </footer>
  <!-- /Footer -->
  

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- JS Files -->
  <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../../assets/vendor/aos/aos.js"></script>
  <script src="../../assets/js/main.js"></script>

  <script>
    AOS.init();
  
    document.addEventListener("DOMContentLoaded", function () {
      const clickableFiles = document.querySelectorAll(".clickable-file");
  
      clickableFiles.forEach(function (block) {
        block.addEventListener("click", function () {
          const filePath = block.getAttribute("data-filepath");
          if (filePath) {
            window.open(filePath, "_blank");
          }
        });
      });
    });
  </script>
</body>
</html>
